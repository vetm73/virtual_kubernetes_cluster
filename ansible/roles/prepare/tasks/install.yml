- name: Update repositories cache and install "foo" package
  yum:
    name:
      - yum-utils
      - device-mapper-persistent-data
      - lvm2
    state: present
- name: add Kubernetes' YUM repository
  yum_repository:
    name: Kubernetes
    description: Kubernetes YUM repository
    baseurl: https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
    gpgkey: https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
    gpgcheck: yes
- shell: "yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo"
- name: install docker and kubernetes
  yum:
    name:
      - docker-ce-18.06.1.ce-3.el7
      - kubelet
      - kubeadm
      - kubectl
      - ntp
    state: present
